# Melt

Backup and restore a SSH private key to mnemonic word set you can memorize.

## Usage

You check its `backup` and `restore` subcommands:

```shell
melt backup ~/.ssh/id_ed25519
melt restore --mnemonic "words from backup" ./recovered_id_ed25519
```

You can also pipe to and from a file directly, e.g.:

```shell
melt backup ~/.ssh/id_ed25519 > words
melt restore ./recovered_id_ed25519 < words
```

## How it works

It all comes down to the private key __seed__:

> Ed25519 keys start life as a 32-byte (256-bit) uniformly random binary seed (e.g. the output of SHA256 on some random input). The seed is then hashed using SHA512, which gets you 64 bytes (512 bits), which is then split into a “left half” (the first 32 bytes) and a “right half”. The left half is massaged into a curve25519 private scalar “a” by setting and clearing a few high/low-order bits. The pubkey is generated by multiplying this secret scalar by “B” (the generator), which yields a 32-byte/256-bit group element “A”.
> https://blog.mozilla.org/warner/2011/11/29/ed25519-keys/

Knowing that, we open the key and extract its seed, and use it as __entropy__ for the [bip39][] algorithm, which states:

> The mnemonic must encode entropy in a multiple of 32 bits. With more entropy security is improved but the sentence length increases. We refer to the initial entropy length as ENT. The allowed size of ENT is 128-256 bits.

Doing that, we get the __mnemonic__ set of words back.

To restore, we:

- get the __entropy__ from the __mnemonic__
- the __entropy__ is effectively the key __seed__, so we use it to create a SSH key pair
- the key is effectively the same that was backup up, as the key is the same.

[bip39]: https://github.com/bitcoin/bips/blob/master/bip-0039.mediawiki

## Caveats

At this time, only `ed25519` keys are supported.

## License

[MIT](https://github.com/charmbracelet/melt/raw/master/LICENSE)

***

Part of [Charm](https://charm.sh).

<a href="https://charm.sh/"><img alt="The Charm logo" src="https://stuff.charm.sh/charm-badge-unrounded.jpg" width="400"></a>
